{"tags":[{"name":"算法","permalink":"http://www.smartyi8979.com/tags/算法/","url":"/async/tags/算法.json","count":66},{"name":"Google","permalink":"http://www.smartyi8979.com/tags/Google/","url":"/async/tags/Google.json","count":61},{"name":"Leetcode","permalink":"http://www.smartyi8979.com/tags/Leetcode/","url":"/async/tags/Leetcode.json","count":62}],"categories":[{"name":"技术","permalink":"http://www.smartyi8979.com/categories/技术/","url":"/async/categories/技术.json","count":68}],"url":"/async/posts/2016/03/20/Smallest-Rectangle-Enclosing-Black-Pixels.json","date":1458525333000,"path":{"year":2016,"month":3,"day":20,"name":"Smallest-Rectangle-Enclosing-Black-Pixels"},"title":"Smallest Rectangle Enclosing Black Pixels","permalink":"http://www.smartyi8979.com/2016/03/20/Smallest-Rectangle-Enclosing-Black-Pixels/","content":"<h4 id=\"Problem\"><a href=\"#Problem\" class=\"headerlink\" title=\"Problem :\"></a>Problem :</h4><p>An image is represented by a binary matrix with 0 as a white pixel and 1 as a black pixel. The black pixels are connected, i.e., there is only one black region. Pixels are connected horizontally and vertically. Given the location (x, y) of one of the black pixels, return the area of the smallest (axis-aligned) rectangle that encloses all black pixels.<br><a id=\"more\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">For example, given the following image:</span><br><span class=\"line\"></span><br><span class=\"line\">[</span><br><span class=\"line\">  &quot;0010&quot;,</span><br><span class=\"line\">  &quot;0110&quot;,</span><br><span class=\"line\">  &quot;0100&quot;</span><br><span class=\"line\">]</span><br><span class=\"line\">and x = 0, y = 2,</span><br><span class=\"line\">Return 6.</span><br></pre></td></tr></table></figure>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>给定一个图片像素，字符0代表白点，1代表黑点，且黑点区域连通。求得能够将所有黑点包围起来的长方形的最小面积。</p>\n<ul>\n<li>维护上下左右四个变量；</li>\n<li>以给出的起点作为搜索起始点，进行BFS，然后在搜索过程中不断更新上下左右四个点的值；</li>\n<li>最后根据上下左右的值返回长方形大小；</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">minArea</span><span class=\"params\">(<span class=\"keyword\">char</span>[][] image, <span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (image == <span class=\"keyword\">null</span> || image.length == <span class=\"number\">0</span> || image[<span class=\"number\">0</span>].length == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> left = x;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> right = x;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> top = y;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> bottom = y;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] dx = &#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,-<span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] dy = &#123;<span class=\"number\">1</span>,<span class=\"number\">0</span>,-<span class=\"number\">1</span>,<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> row = image.length;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> col = image[<span class=\"number\">0</span>].length;</span><br><span class=\"line\">        Deque&lt;<span class=\"keyword\">int</span>[]&gt; queue = <span class=\"keyword\">new</span> ArrayDeque&lt;&gt;();</span><br><span class=\"line\">        queue.offer(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[]&#123;x, y&#125;);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (queue.size() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span>[] cur = queue.poll();</span><br><span class=\"line\">            <span class=\"keyword\">int</span> curX = cur[<span class=\"number\">0</span>];</span><br><span class=\"line\">            <span class=\"keyword\">int</span> curY = cur[<span class=\"number\">1</span>];</span><br><span class=\"line\">            left = curX &lt; left? curX : left;</span><br><span class=\"line\">            right = curX &gt; right? curX : right;</span><br><span class=\"line\">            top = curY &gt; top? curY : top;</span><br><span class=\"line\">            bottom = curY &lt; bottom? curY : bottom;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> nextX = curX + dx[i];</span><br><span class=\"line\">                <span class=\"keyword\">int</span> nextY = curY + dy[i];</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (nextX &gt;= <span class=\"number\">0</span> &amp;&amp; nextX &lt; row &amp;&amp; nextY &gt;= <span class=\"number\">0</span> &amp;&amp; nextY &lt; col &amp;&amp; image[nextX][nextY] == <span class=\"string\">'1'</span>) &#123;</span><br><span class=\"line\">                    image[nextX][nextY] = <span class=\"string\">'0'</span>;</span><br><span class=\"line\">                    queue.offer(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[]&#123;nextX, nextY&#125;);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (right - left + <span class=\"number\">1</span>) * (top - bottom + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这么一个题目，竟然用简简单单的BFS就解决了，显然配不上它hard标签。一看tag，竟然没有看见BFS的痕迹，相反出现了binary search。我就知道，不会这么简单，而且查看运行时间522ms，果然是不行。那么如果从binary search入手，怎么解这个题？<br>不看讨论区，反正我是想不到这个方法。</p>\n<ul>\n<li>由于给定一个已知的黑点坐标，那么我们就可以以这个黑点坐标为分界点，进行左右二分查找</li>\n<li>查找分四步，分别查找最左最右有黑点的列，和最上最下有黑点的行；</li>\n<li>找出这个就能够得到长方形面积；</li>\n<li>在这里值得注意的是最右边查找的其实并不是有黑点的列，而是查找第一个没有黑点的列，这点你可以从最后的返回公式可以看出，按理说应该是<code>(right - left ＋ 1) * (bottom - top ＋ 1)</code>，但是这里并没有加1；同理最下面查找的也是第一个没有黑点的行；</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">minArea</span><span class=\"params\">(<span class=\"keyword\">char</span>[][] image, <span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (image == <span class=\"keyword\">null</span> || image.length == <span class=\"number\">0</span> || image[<span class=\"number\">0</span>].length == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> row = image.length;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> col = image[<span class=\"number\">0</span>].length;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> left = searchCol(image, <span class=\"number\">0</span>, y, <span class=\"number\">0</span>, row, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> right = searchCol(image, y, col, <span class=\"number\">0</span>, row, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> top = searchRow(image, <span class=\"number\">0</span>, x, <span class=\"number\">0</span>, col, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> bottom = searchRow(image, x, row, <span class=\"number\">0</span>, col, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (right - left) * (bottom - top);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">searchCol</span><span class=\"params\">(<span class=\"keyword\">char</span>[][] image, <span class=\"keyword\">int</span> startCol, <span class=\"keyword\">int</span> endCol, <span class=\"keyword\">int</span> startRow, <span class=\"keyword\">int</span> endRow, <span class=\"keyword\">boolean</span> dir)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> left = startCol;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> right = endCol;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (left &lt; right) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> index = startRow;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = left + (right - left) / <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (index &lt; endRow &amp;&amp; image[index][mid] == <span class=\"string\">'0'</span>) index++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (dir) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (index &lt; endRow) &#123;</span><br><span class=\"line\">                    right = mid;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    left = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (index &lt; endRow) &#123;</span><br><span class=\"line\">                    left = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    right = mid;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">searchRow</span><span class=\"params\">(<span class=\"keyword\">char</span>[][] image, <span class=\"keyword\">int</span> startRow, <span class=\"keyword\">int</span> endRow, <span class=\"keyword\">int</span> startCol, <span class=\"keyword\">int</span> endCol, <span class=\"keyword\">boolean</span> dir)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> top = startRow;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> bottom = endRow;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (top &lt; bottom) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> index = startCol;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = top + (bottom - top) / <span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (index &lt; endCol &amp;&amp; image[mid][index] == <span class=\"string\">'0'</span>) index++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (dir) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (index &lt; endCol) &#123;</span><br><span class=\"line\">                    bottom = mid;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    top = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (index &lt; endCol) &#123;</span><br><span class=\"line\">                    top = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    bottom = mid;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> top;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>运行时间直接从522ms降到1ms，作为能够改变世界的十大算法－－二分查找的威力不是针对谁。</p>\n"}